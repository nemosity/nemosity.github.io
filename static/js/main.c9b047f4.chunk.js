(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{194:function(e){e.exports=[{groupId:"our-driver-details",label:"Your details",elements:[{id:"driver.first-name",widget:"Input",defaultValue:"",label:"First name"},{id:"driver.last-name",widget:"Input",defaultValue:"",label:"Last name"},{id:"at-fault",widget:"Radio",defaultValue:"",values:[{label:"Me",value:"me"},{label:"Someone else",value:"tp"},{label:"Not sure",value:"unknown"}],label:"Who was at fault?"},{id:"accident-description",widget:"Textarea",defaultValue:"Tell us what happened...",label:"What happened?"}]},{groupId:"other-driver-details",elements:[{id:"other-driver.name",widget:"Input",defaultValue:"",label:"Driver name"},{id:"accident-description",widget:"Textarea",defaultValue:"Damage to their vehicle",label:"Describe the damage to "}],label:"Other driver details"}]},195:function(e){e.exports=[{pageId:"Incident Type",content:{groupId:"our-driver-details",label:"What best describes your incident?",elements:[{id:"incident.type",widget:"Radio",defaultValue:"",validation:{required:!0},values:[{label:"Accident",value:"accident"},{label:"Fire",value:"fire"},{label:"Theft",value:"theft"}],label:""},{id:"vehicle-recovered-by",widget:"Array",label:"Who found the vehicle?"}]}},{pageId:"Your details",showIf:{id:"incident.type",value:"accident"},content:{groupId:"our-driver-details",label:"About the incident",elements:[{id:"at-fault",widget:"Radio",defaultValue:"",values:[{label:"Me",value:"me"},{label:"Someone else",value:"tp"},{label:"Not sure",value:"unknown"}],label:"Who was at fault?",validation:{required:!0}},{id:"accident-description",widget:"Textarea",defaultValue:"E.g. I was parallel parking outside work and backed into a lamp post",label:"Tell us what happened",validation:{required:!0}}]}},{pageId:"Your details",showIf:{id:"incident.type",value:"theft"},content:{groupId:"our-driver-details",label:"About the theft",elements:[{id:"vehicle-recovered",widget:"Radio",defaultValue:"",values:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],label:"Has the vehicle been found?",validation:{required:!0}},{id:"vehicle-recovered-by",widget:"Input",label:"Who found the vehicle?",validation:{required:!0},showIf:{id:"vehicle-recovered",value:"yes"}}]}},{pageId:"Incident Date",content:{groupId:"our-driver-details",label:"When did the incident occur?",elements:[{id:"incident.date",widget:"DatePicker",defaultValue:"",label:"",validation:{required:!0}}]}},{pageId:"Your details",content:{groupId:"our-driver-details",label:"Your details",elements:[{id:"driver.name",widget:"Input",defaultValue:"",label:"Name",validation:{pattern:"^[A-Za-z\\s]+$",required:!0}}]}},{pageId:"About the incident",content:{groupId:"other-driver-details",elements:[{id:"tp-involed",widget:"Radio",defaultValue:"",values:[{label:"Yes",value:"yes"},{label:"No",value:"no"}],label:"Was another vehicle involved?",validation:{required:!0}},{id:"other-driver.name",widget:"Input",defaultValue:"",label:"Driver name",showIf:{id:"tp-involed",value:"yes"},validation:{required:!0}},{id:"tp-damage-description",widget:"Textarea",defaultValue:"E.g. small dent to left bumper",label:"Describe the damage to the other car",showIf:{id:"tp-involed",value:"yes"},validation:{required:!0}},{id:"tp-insured",widget:"Dropdown",defaultValue:"",label:"Who is the third party insured with?",src:"/refData.json"}],label:"Other driver details"}},{pageId:"Contact Details",content:{groupId:"other-driver-details",elements:[{id:"main-contact.preferred-method",widget:"Radio",defaultValue:"",values:[{label:"Call",value:"phone"},{label:"Text (SMS)",value:"sms"},{label:"Email",value:"email"}],label:"What's your preferred way for us to contact you?"},{id:"main-contact.phone",widget:"Input",defaultValue:"",label:"Phone",showIf:{id:"main-contact.preferred-method",value:"phone"},validation:{required:!0,pattern:"^([(]?(0|\\+64)((2[0-9]?)|3|4|6|7|8|9)[)]?)[-\\s0-9]*$"}},{id:"main-contact.mobile",widget:"Input",defaultValue:"",label:"Mobile",showIf:{id:"main-contact.preferred-method",value:"sms"},validation:{required:!0,pattern:"^02[-\\s0-9]*$",minLength:9,maxLength:12}},{id:"main-contact.email",widget:"Input",defaultValue:"",label:"Email",showIf:{id:"main-contact.preferred-method",value:"email"},validation:{required:!0,pattern:"^[&_A-Za-z0-9-'+?]+(\\.[&_A-Za-z0-9-'+?]+)*@[&A-Za-z0-9-]+(\\.[&A-Za-z0-9-]+)*(\\.[&_A-Za-z0-9-]+)$"}}],label:"Contact details"}},{pageId:"claim-complete",content:{groupId:"other-driver-details",elements:[],label:"Thanks, we've recieved your claim!"}}]},196:function(e){e.exports={groupId:"other-driver-details",elements:[{id:"main-contact.preferred-method",widget:"Radio",defaultValue:"",values:[{label:"Call",value:"phone"},{label:"Text (SMS)",value:"sms"},{label:"Email",value:"email"}],label:"What's your preferred way for us to contact you?"},{id:"main-contact.phone",widget:"Input",defaultValue:"",label:"Phone number",showIf:{id:"main-contact.preferred-method",value:"phone"}},{id:"main-contact.mobile",widget:"Input",defaultValue:"",label:"Mobile number",showIf:{id:"main-contact.preferred-method",value:"sms"}},{id:"main-contact.email",widget:"Input",defaultValue:"",label:"Email",showIf:{id:"main-contact.preferred-method",value:"email"}}],label:"Contact details"}},201:function(e,t,a){e.exports=a(500)},210:function(e,t,a){},211:function(e,t,a){},372:function(e,t,a){var r={"./ami/Datepicker.css":373,"./bendigo/Datepicker.css":374,"./cgu/Datepicker.css":375,"./coles/Datepicker.css":376,"./core/Datepicker.css":173,"./nrma/Datepicker.css":377,"./racv/Datepicker.css":378,"./sgic/Datepicker.css":379,"./sgio/Datepicker.css":380,"./state/Datepicker.css":381,"./wfi/Datepicker.css":382};function n(e){var t=i(e);return a(t)}function i(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(r)},n.resolve=i,e.exports=n,n.id=372},491:function(e,t,a){},500:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(53),l=a(20),o=a.n(l),c=(a(210),a(29)),s=a(30),u=a(32),d=a(31),p=a(33),m=(a(211),a(12)),h=a(5),v=a(42),f=a(62),b=a(79),g=a(10),O=a.n(g),E=a(192),w=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={values:[{label:"Loading...",value:""}],disabled:!0},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(O.a.mark(function e(){var t,a,r=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.src){e.next=14;break}return e.prev=1,e.next=4,fetch(this.props.src);case 4:return t=e.sent,e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",setTimeout(function(){return r.setState({values:a,disabled:!1})},1e3));case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",console.log(e.t0));case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(h.Select,Object.assign({},this.props,{values:this.state.values,className:this.state.disabled?"disable-select":null}))}}]),t}(r.Component),y={ActionList:v.ActionList,Alert:v.Alert,Autocomplete:h.Autocomplete,BackedByIag:v.BackedByIag,Button:h.Button,ButtonGroup:h.ButtonGroup,Card:h.Card,Checkbox:h.Checkbox,Container:m.Container,Content:m.Content,DatePicker:h.DatePicker,DetailList:h.DetailList,Dropdown:w,Footer:m.Footer,Form:h.Form,FormContainer:m.FormContainer,FormGroup:h.FormGroup,FormMain:m.FormMain,GridColumn:m.GridColumn,GridRow:m.GridRow,getAssetsPath:f.getAssetsPath,Header:m.Header,Icon:h.Icon,InlineLoader:h.InlineLoader,Input:h.Input,InputMask:h.InputMask,List:h.List,Loader:h.Loader,Main:m.Main,Modal:v.Modal,Radio:h.Radio,RadioBlock:h.RadioBlock,RadioButton:h.RadioButton,Select:h.Select,Textarea:h.Textarea},A=a(15),I=a.n(A),k=function(e,t,a,n){return function e(i){return Array.isArray(i)?r.createElement.apply(void 0,[r.Fragment,{}].concat(Object(b.a)(i.map(function(t){return e(t)})))):i.groupId?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("h4",null,i.label),e(i.elements)):!y[i.widget]||i.showIf&&I()(t,i.showIf.id)!==i.showIf.value?null:Object(r.createElement)(h.FormGroup,{label:i.label,error:I()(n,i.id),for:i.id},Object(r.createElement)(y[i.widget],{id:i.id,name:i.id,value:I()(t,i.id,""),onChange:function(e,t){return a(i.id,I()(e,"target.value")||t)},placeholder:i.defaultValue,className:"u-mar-b--3",values:i.values,src:i.src}))}(e)},j=a(193),S=a.n(j),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).sliderSettings={accessibility:!1,arrows:!1,dots:!1,infinite:!1,initialSlide:e.step,speed:500,slidesToShow:1,slidesToScroll:1,swipe:!1,swipeToSlide:!1,touchMove:!1,variableWidth:!0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.step!==e.step&&this.slider.slickGoTo(this.props.step)}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,r=t.step;return n.a.createElement(S.a,Object.assign({ref:function(t){return e.slider=t}},this.sliderSettings),a.map(function(e,t){return n.a.createElement("div",{"aria-hidden":r!==t,key:"slide".concat(t),style:{width:600}},r===t&&e)}))}}]),t}(r.Component),x=a(501),D={SCHEMA:{ERROR:"SCHEMA.ERROR",LOAD:"SCHEMA.LOAD",UPDATE:"SCHEMA.UPDATE"},FORM:{CLEAR:"FORM.CLEAR",MOVE_NEXT:"FORM.MOVE_NEXT",MOVE_BACK:"FORM.MOVE_BACK",UPDATE:{INPUT:"FORM.UPDATE.INPUT",STEP:"FORM.UPDATE.STEP"},VALIDATE:"FORM.VALIDATE",VALIDATE_FAIL:"FORM.VALIDATE_FAIL"}},T=Object(x.a)(D.FORM.CLEAR),F=Object(x.a)(D.FORM.UPDATE.INPUT),R=(Object(x.a)(D.FORM.UPDATE.STEP),Object(x.a)(D.FORM.MOVE_BACK)),C=Object(x.a)(D.FORM.VALIDATE),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).renderAlert=function(){return n.a.createElement(v.Alert,{id:"successLozenge",icon:"icon__attention",type:a.props.valid?"success":"warning",className:"u-mar-b--3",inline:!0},n.a.createElement("p",null,a.props.valid?"Valid schema":"Enter a valid schema or select a schema to load"))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.props.valid?Array.isArray(this.props.schema)&&this.props.schema.length>0&&I()(this.props.schema,"[0].pageId")?n.a.createElement(M,{step:this.props.step},this.props.schema.map(function(t,a){return n.a.createElement("div",{style:{minHeight:500},key:a},k(t.content,e.props.form,e.props.onUpdateForm,e.props.errors),n.a.createElement(h.ButtonGroup,{className:"u-align-items--center u-justify-content--center"},n.a.createElement(h.Button,{tracking:"eg1",onClick:function(){return e.props.onMoveBack()},tertiary:!0,outline:!0,disabled:e.props.step-1<0},"Back"),n.a.createElement(h.Button,{name:"eg2",onClick:function(){return e.props.onValidateForm(e.props.step)},primary:!0,disabled:e.props.step+1>e.props.schema.length-1},"Next")))})):k(this.props.schema,this.props.form,this.props.onUpdateForm):this.renderAlert()}}]),t}(r.Component),L=Object(i.b)(function(e){var t=e.form,a=e.schema;return{errors:t.errors,form:t.input,step:t.step,schema:a.parsedSchema,valid:a.valid}},function(e){return{onUpdateForm:function(t,a){return e(F({path:t,data:a}))},onMoveBack:function(t){return e(R(t))},onValidateForm:function(t){return e(C(t))}}})(V),N=(a(491),function(e){var t=e.currentStep,a=e.initialPercentage,r=e.totalSteps,i=Math.max(a,Math.min(t/(r-1)*100,100));return n.a.createElement("div",{className:"ProgressBar"},n.a.createElement("div",{className:"ProgressBar--bar"},n.a.createElement("div",{style:{width:i+"%"}})))});N.defaultProps={currentStep:0,initialPercentage:0};var P=N,B=a(194),U=a(195),_=a(196),H=Object(x.a)(D.SCHEMA.UPDATE),q=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"renderProgressBar",value:function(){var e,t;try{e=JSON.parse(this.props.schema),t=!0}catch(a){t=!1}return t&&Array.isArray(e)&&e[0].pageId?n.a.createElement(P,{totalSteps:e.length,currentStep:this.props.form.step,initialPercentage:2,sectionCompleteIcon:"tick-invert"}):null}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(m.Header,{title:"Chroma Dynamic Forms",brand:"nrma"}),this.renderProgressBar(),n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"container bg-grey u-border-radius--4 u-mar--8"},n.a.createElement("div",{className:"row u-mar-x--7 u-mar-y--8"},n.a.createElement("div",{className:"col"},n.a.createElement("div",{className:"bg-grey u-text--center"},n.a.createElement("h2",null,"Schema")),n.a.createElement("div",{className:"bg-grey u-text--center u-mar-b--6 code"},n.a.createElement(h.Textarea,{id:"textarea",rows:8,onChange:this.props.onSchemaUpdate,value:this.props.schema})),n.a.createElement(h.ButtonGroup,{className:"u-align-items--center u-justify-content--center"},n.a.createElement(h.Button,{tracking:"eg1",onClick:function(){return e.props.onSchemaUpdate({target:{value:JSON.stringify(B,null,4)}})},primary:!0},"Simple Form"),n.a.createElement(h.Button,{name:"eg2",onClick:function(){return e.props.onSchemaUpdate({target:{value:JSON.stringify(U,null,4)}})},primary:!0},"Pagination"),n.a.createElement(h.Button,{name:"eg3",onClick:function(){return e.props.onSchemaUpdate({target:{value:JSON.stringify(_,null,4)}})},primary:!0},"Conditionals")),n.a.createElement("div",{className:"bg-grey u-text--center u-mar-t--8"},n.a.createElement("h2",null,"Generated Payload")),n.a.createElement("div",{className:"bg-grey u-text--left code u-mar-b--6"},n.a.createElement(h.Textarea,{id:"formoutput",rows:8,value:JSON.stringify(this.props.form.input,null,4),readonly:!0})),n.a.createElement(h.ButtonGroup,{className:"u-align-items--center u-justify-content--center u-mar-b--8"},n.a.createElement(h.Button,{tracking:"clearForm",onClick:function(){return e.props.onClearForm()},primary:!0},"Reset Form"))),n.a.createElement("div",{className:"col"},n.a.createElement("div",{className:"bg-grey u-text--center"},n.a.createElement("h2",null,"Dynamic Form")),n.a.createElement("div",{className:"bg-grey u-text--left"},n.a.createElement(L,null)))))))}}]),t}(r.Component),G=Object(i.b)(function(e){return{form:e.form,schema:e.schema.rawSchema}},function(e){return{onSchemaUpdate:function(t){var a=t.target.value;return e(H(a))},onClearForm:function(){return e(T())}}})(q);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(19),J=(a(197),a(199)),z=a(11),Y=function(e){return e.form.input},Z=function(e){return e.schema.parsedSchema},X=a(64),$=a.n(X),K=function(e,t){var a={};return function e(r){if(Array.isArray(r))return r.map(function(t){return e(t)});if(r.groupId)return r.elements.map(function(t){return e(t)});if(!r.showIf||I()(t,r.showIf.id)===r.showIf.value)return r.validation&&r.validation.required&&!I()(t,r.id)?$()(a,r.id,"This field is required"):r.validation&&r.validation.pattern&&!new RegExp(r.validation.pattern).test(I()(t,r.id))?$()(a,r.id,"Failed to match regex ".concat(r.validation.pattern)):r.validation&&r.validation.minLength&&I()(t,r.id).length<r.validation.minLength?$()(a,r.id,"Failed to meet minimum length of ".concat(r.validation.minLength," characters")):r.validation&&r.validation.maxLength&&I()(t,r.id).length>r.validation.maxLength?$()(a,r.id,"Please limit input to ".concat(r.validation.maxLength," characters")):void 0}(e),Object.keys(a).length>0?a:null},Q=O.a.mark(re),ee=O.a.mark(ne),te=O.a.mark(ie),ae=O.a.mark(le);function re(e){var t,a,r,n;return O.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(z.d)(Y);case 2:return t=i.sent,i.next=5,Object(z.d)(Z);case 5:if(a=i.sent,!Number.isInteger(e.payload)||!a[e.payload].pageId){i.next=16;break}if(r=a[e.payload].content,!(n=K(r,t))){i.next=14;break}return i.next=12,Object(z.c)({type:D.FORM.VALIDATE_FAIL,payload:n});case 12:i.next=16;break;case 14:return i.next=16,Object(z.c)({type:D.FORM.MOVE_NEXT,payload:e.payload});case 16:case"end":return i.stop()}},Q)}function ne(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.e)(D.FORM.VALIDATE,re);case 2:case"end":return e.stop()}},ee)}function ie(e){var t,a,r,n;return O.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(z.d)(Y);case 2:return t=i.sent,i.next=5,Object(z.d)(Z);case 5:for(a=i.sent,r=e.payload+1,n=function(e){var r=a[e].showIf;return!(!r||I()(t,r.id)===r.value)};n(r);)r++;return i.next=11,Object(z.c)({type:D.FORM.UPDATE.STEP,payload:r});case 11:case"end":return i.stop()}},te)}function le(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.e)(D.FORM.VALIDATE,ie);case 2:case"end":return e.stop()}},ae)}var oe=O.a.mark(se),ce=O.a.mark(ue);function se(e){var t,a;return O.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:try{t=JSON.parse(e.payload),a=!0}catch(n){a=!1}if(!a){r.next=6;break}return r.next=4,Object(z.c)({type:D.SCHEMA.LOAD,payload:t});case 4:r.next=8;break;case 6:return r.next=8,Object(z.c)({type:D.SCHEMA.ERROR});case 8:case"end":return r.stop()}},oe)}function ue(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.e)(D.SCHEMA.UPDATE,se);case 2:case"end":return e.stop()}},ce)}var de=O.a.mark(pe);function pe(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(z.a)([Object(z.b)(ne),Object(z.b)(ue),Object(z.b)(le)]);case 2:case"end":return e.stop()}},de)}var me=a(34),he=a(198),ve={errors:null,input:{},step:0,visitedSteps:[]};var fe={rawSchema:"",parsedSchema:null,valid:null};var be=Object(W.c)({form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case D.FORM.CLEAR:return ve;case D.FORM.UPDATE.INPUT:return Object(he.set)("input.".concat(r.path),r.data,e);case D.FORM.UPDATE.STEP:return Object(me.a)({},e,{step:r,visitedSteps:[].concat(Object(b.a)(e.visitedSteps),[e.step]),errors:null});case D.FORM.MOVE_BACK:return Object(me.a)({},e,{step:e.visitedSteps[e.visitedSteps.length-1],visitedSteps:e.visitedSteps.slice(0,e.visitedSteps.length-1)});case D.FORM.VALIDATE_FAIL:return Object(me.a)({},e,{errors:r});default:return e}},schema:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case D.SCHEMA.UPDATE:return Object(me.a)({},e,{rawSchema:r});case D.SCHEMA.LOAD:return Object(me.a)({},e,{parsedSchema:r,valid:!0});case D.SCHEMA.ERROR:return Object(me.a)({},e,{valid:!1});default:return e}}}),ge=Object(J.a)();var Oe=function(e){var t=[ge],a=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||W.d,r=Object(W.e)(be,e,a(W.a.apply(void 0,t)));return ge.run(pe),r}();o.a.render(n.a.createElement(i.a,{store:Oe},n.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[201,1,2]]]);
//# sourceMappingURL=main.c9b047f4.chunk.js.map